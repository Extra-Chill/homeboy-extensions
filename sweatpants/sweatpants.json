{
  "name": "Sweatpants",
  "version": "0.2.1",
  "icon": "server.rack",
  "description": "Bridge to Sweatpants automation engine",
  "author": "Extra Chill",
  "homepage": "https://github.com/Extra-Chill/sweatpants",

  "cli": {
    "tool": "sweatpants",
    "display_name": "Sweatpants",
    "command_template": "bash {{module_path}}/scripts/sweatpants-bridge.sh {{args}}",
    "help": {
      "project_id_help": "Endpoint ID (local, vps, etc.) or omit to use default",
      "args_help": "Sweatpants command",
      "examples": [
        "homeboy sweatpants status",
        "homeboy sweatpants local status",
        "homeboy sweatpants run my-module -i key=value",
        "homeboy sweatpants vps run my-scraper -i query=test",
        "homeboy sweatpants logs <job-id> --follow"
      ]
    }
  },

  "settings": [
    {
      "id": "default_endpoint",
      "label": "Default Endpoint",
      "type": "string",
      "default": "local"
    }
  ],

  "deploy_override": [
    {
      "path_pattern": "/home/sweatpants/services/sweatpants",
      "staging_path": "/tmp/homeboy-staging",
      "install_command": "cd /home/sweatpants/services && rm -rf sweatpants.old && mv sweatpants sweatpants.old 2>/dev/null || true && tar -xzf {{stagingArtifact}} && mv sweatpants-* sweatpants && cd sweatpants && (mv ../sweatpants.old/.venv .venv 2>/dev/null || python3 -m venv .venv) && .venv/bin/pip install -e . --quiet && systemctl restart sweatpants",
      "cleanup_command": "rm -f {{stagingArtifact}} && rm -rf /home/sweatpants/services/sweatpants.old",
      "skip_permissions_fix": true
    }
  ]
}
